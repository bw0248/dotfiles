#!/bin/bash

echo $1

#laptop display is always connected
conn_mon_1="eDP1"
conf_changed=false

# get the other available output
read conn_mon_2 <<< $(xrandr | grep '\Wconnected' | grep -v "eDP1" | awk '{print $1}')

#echo $conn_mon_1 
#echo $conn_mon_2 

main_mon=""
sec_mon=""

if [ "$1" = "home" ]; then
  #echo $1
  main_mon=$conn_mon_2
  sec_mon=$conn_mon_1
  conf_changed=true
elif [ "$1" = "pres" ]; then
  #echo $1
  main_mon=$conn_mon_1
  sec_mon=$conn_mon_2
  conf_changed=true
elif [ "$1" = "laptop" ]; then
  xrandr --auto
fi

#echo $main_mon
#echo $sec_mon

if $conf_changed ; then
  # change outputs in i3wm config
  sed -i "s/set \$MAIN_MON .*/set \$MAIN_MON $main_mon/" "/home/bw/.config/i3/config"
  sed -i "s/set \$SEC_MON .*/set \$SEC_MON $sec_mon/" "/home/bw/.config/i3/config"

  # restart i3 (in place)
  i3-msg restart
  #sleep(0.25)
  i3-msg restart
fi


